(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5539:function(e,r,t){Promise.resolve().then(t.bind(t,4337))},4337:function(e,r,t){"use strict";t.d(r,{GolfSwingAnalyzerMediapipe:function(){return M}});var a=t(7437),l=t(2265),s=t(7625),n=t(1156),o=t(6940),d=t(7059),i=t(2994),c=t(2190),u=t(4061),h=t(5169),f=t(3574),m=t(407),p=t(1994),x=t(3335);function g(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,x.m6)((0,p.W)(r))}let v=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:g("rounded-xl border bg-card text-card-foreground shadow",t),...l})});v.displayName="Card";let b=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:g("flex flex-col space-y-1.5 p-6",t),...l})});b.displayName="CardHeader";let j=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:r,className:g("font-semibold leading-none tracking-tight",t),...l})});j.displayName="CardTitle",l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:r,className:g("text-sm text-muted-foreground",t),...l})}).displayName="CardDescription";let y=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:g("p-6 pt-0",t),...l})});y.displayName="CardContent",l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:g("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter";var w=t(8147);let N={light:"",dark:".dark"},k=l.createContext(null);function _(){let e=l.useContext(k);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let C=l.forwardRef((e,r)=>{let{id:t,className:n,children:o,config:d,...i}=e,c=l.useId(),u="chart-".concat(t||c.replace(/:/g,""));return(0,a.jsx)(k.Provider,{value:{config:d},children:(0,a.jsxs)("div",{"data-chart":u,ref:r,className:g("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...i,children:[(0,a.jsx)(E,{id:u,config:d}),(0,a.jsx)(s.h,{children:o})]})})});C.displayName="Chart";let E=e=>{let{id:r,config:t}=e,l=Object.entries(t).filter(e=>{let[r,t]=e;return t.theme||t.color});return l.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(N).map(e=>{let[t,a]=e;return"\n".concat(a," [data-chart=").concat(r,"] {\n").concat(l.map(e=>{var r;let[a,l]=e,s=(null===(r=l.theme)||void 0===r?void 0:r[t])||l.color;return s?"  --color-".concat(a,": ").concat(s,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},F=w.u,D=l.forwardRef((e,r)=>{let{active:t,payload:s,className:n,indicator:o="dot",hideLabel:d=!1,hideIndicator:i=!1,label:c,labelFormatter:u,labelClassName:h,formatter:f,color:m,nameKey:p,labelKey:x}=e,{config:v}=_(),b=l.useMemo(()=>{var e;if(d||!(null==s?void 0:s.length))return null;let[r]=s,t="".concat(x||r.dataKey||r.name||"value"),l=I(v,r,t),n=x||"string"!=typeof c?null==l?void 0:l.label:(null===(e=v[c])||void 0===e?void 0:e.label)||c;return u?(0,a.jsx)("div",{className:g("font-medium",h),children:u(n,s)}):n?(0,a.jsx)("div",{className:g("font-medium",h),children:n}):null},[c,u,s,d,h,v,x]);if(!t||!(null==s?void 0:s.length))return null;let j=1===s.length&&"dot"!==o;return(0,a.jsxs)("div",{ref:r,className:g("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:b,(0,a.jsx)("div",{className:"grid gap-1.5",children:s.map((e,r)=>{let t="".concat(p||e.name||e.dataKey||"value"),l=I(v,e,t),s=m||e.payload.fill||e.color;return(0,a.jsx)("div",{className:g("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:f&&(null==e?void 0:e.value)!==void 0&&e.name?f(e.value,e.name,e,r,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==l?void 0:l.icon)?(0,a.jsx)(l.icon,{}):!i&&(0,a.jsx)("div",{className:g("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":j&&"dashed"===o}),style:{"--color-bg":s,"--color-border":s}}),(0,a.jsxs)("div",{className:g("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==l?void 0:l.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function I(e,r,t){if("object"!=typeof r||null===r)return;let a="payload"in r&&"object"==typeof r.payload&&null!==r.payload?r.payload:void 0,l=t;return t in r&&"string"==typeof r[t]?l=r[t]:a&&t in a&&"string"==typeof a[t]&&(l=a[t]),l in e?e[l]:e[t]}D.displayName="ChartTooltip",c.D,l.forwardRef((e,r)=>{let{className:t,hideIcon:l=!1,payload:s,verticalAlign:n="bottom",nameKey:o}=e,{config:d}=_();return(null==s?void 0:s.length)?(0,a.jsx)("div",{ref:r,className:g("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",t),children:s.map(e=>{let r="".concat(o||e.dataKey||"value"),t=I(d,e,r);return(0,a.jsxs)("div",{className:g("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==t?void 0:t.icon)&&!l?(0,a.jsx)(t.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==t?void 0:t.label]},e.value)})}):null}).displayName="ChartLegend";var R=t(5293);let A=(0,t(7712).j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),O=l.forwardRef((e,r)=>{let{className:t,variant:l,size:s,asChild:n=!1,...o}=e,d=n?R.g7:"button";return(0,a.jsx)(d,{className:g(A({variant:l,size:s,className:t})),ref:r,...o})});O.displayName="Button";var T=t(3386);let K=[{phase:"Address",angle:90,speed:0},{phase:"Takeaway",angle:45,speed:20},{phase:"Backswing",angle:90,speed:50},{phase:"Top",angle:270,speed:-30},{phase:"Downswing",angle:180,speed:80},{phase:"Impact",angle:45,speed:50},{phase:"Follow-through",angle:-45,speed:-30},{phase:"Finish",angle:90,speed:20}],S=[{name:"Address",value:10},{name:"Takeaway",value:15},{name:"Backswing",value:20},{name:"Top",value:5},{name:"Downswing",value:15},{name:"Impact",value:5},{name:"Follow-through",value:20},{name:"Finish",value:10}],B=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#A4DE6C","#D0ED57"];function M(){let[e,r]=(0,l.useState)(new Date),[t,p]=(0,l.useState)(!1),[x,g]=(0,l.useState)(K),w=(0,l.useRef)(null),N=(0,l.useRef)(null),[k,_]=(0,l.useState)(null),E=()=>{g(e=>e.map(e=>({...e,angle:e.angle+30*Math.random(),speed:e.speed+50*Math.random()})))};(0,l.useEffect)(()=>{let e=setInterval(()=>{E()},3e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{let e=setInterval(()=>{r(new Date)},3e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{(async()=>{let e=await T.n.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm");_(await T.qe.createFromOptions(e,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task",delegate:"GPU"},runningMode:"VIDEO",numPoses:1}))})()},[]);let I=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0});w.current&&(w.current.srcObject=e),p(!0)}catch(e){console.error("웹캠 접근에 실패했습니다:",e)}};return(0,l.useEffect)(()=>{let e;let r=0,a=async()=>{if(t&&k&&w.current&&N.current){let t=performance.now();if(t<=r&&(t=r+1),r=t,w.current.videoWidth>0&&w.current.videoHeight>0){let e=N.current.getContext("2d");if(e){e.clearRect(0,0,N.current.width,N.current.height);let r=new T.ET(e);for(let e of(await k.detectForVideo(w.current,t)).landmarks)r.drawLandmarks(e,{radius:e=>T.ET.lerp(e.from.z,-.15,.1,5,1)}),r.drawConnectors(e,T.qe.POSE_CONNECTIONS)}}e=requestAnimationFrame(a)}};return t&&a(),()=>{e&&cancelAnimationFrame(e)}},[t,k]),(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-gray-100 p-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"골프 스윙 분석기"}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4",children:[(0,a.jsxs)("div",{className:"lg:w-1/2",children:[(0,a.jsxs)("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"4/3"},children:[(0,a.jsx)("video",{ref:w,className:"absolute inset-0 w-full h-full object-cover",autoPlay:!0,playsInline:!0,width:1280,height:720}),(0,a.jsx)("canvas",{ref:N,className:"absolute inset-0 w-full h-full",width:1280,height:720}),(0,a.jsx)("div",{className:"absolute top-2 left-2 bg-white bg-opacity-75 px-2 py-1 rounded text-sm",children:"골프 스윙 카메라"})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,a.jsx)(O,{onClick:I,disabled:t,children:"웹캠 시작"}),(0,a.jsx)(O,{onClick:()=>{w.current&&w.current.srcObject&&w.current.srcObject.getTracks().forEach(e=>e.stop()),p(!1)},disabled:!t,children:"웹캠 중지"})]})]}),(0,a.jsxs)(v,{className:"lg:w-1/2",children:[(0,a.jsx)(b,{children:(0,a.jsx)(j,{children:"스윙 분석"})}),(0,a.jsx)(y,{children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)(C,{config:{angle:{label:"각도",color:"hsl(var(--chart-1))"},speed:{label:"속도",color:"hsl(var(--chart-2))"}},className:"h-[200px]",children:(0,a.jsx)(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.w,{data:x,children:[(0,a.jsx)(o.q,{strokeDasharray:"3 3"}),(0,a.jsx)(d.K,{dataKey:"phase"}),(0,a.jsx)(i.B,{yAxisId:"left",orientation:"left",stroke:"var(--color-angle)"}),(0,a.jsx)(i.B,{yAxisId:"right",orientation:"right",stroke:"var(--color-speed)"}),(0,a.jsx)(F,{content:(0,a.jsx)(D,{})}),(0,a.jsx)(c.D,{}),(0,a.jsx)(u.x,{yAxisId:"left",type:"monotone",dataKey:"angle",stroke:"var(--color-angle)",name:"각도"}),(0,a.jsx)(u.x,{yAxisId:"right",type:"monotone",dataKey:"speed",stroke:"var(--color-speed)",name:"속도"})]})})}),(0,a.jsx)(C,{config:{value:{label:"시간 분포",color:"hsl(var(--chart-3))"}},className:"h-[200px]",children:(0,a.jsx)(s.h,{width:"100%",height:"100%",children:(0,a.jsxs)(h.u,{children:[(0,a.jsx)(f.b,{data:S,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:e=>{let{name:r,percent:t}=e;return"".concat(r," ").concat((100*t).toFixed(0),"%")},children:S.map((e,r)=>(0,a.jsx)(m.b,{fill:B[r%B.length]},"cell-".concat(r)))}),(0,a.jsx)(F,{content:(0,a.jsx)(D,{})})]})})})]})})]})]})]})}}},function(e){e.O(0,[566,971,117,744],function(){return e(e.s=5539)}),_N_E=e.O()}]);